실제 데이터를 수집하고 상관관계를 계산하는 과정을 Python으로 구현하는 예제를 단계별로 설명하겠습니다. 이 예제에서는 **Yahoo Finance**를 통해 주식 및 채권 데이터를 수집하고, **KOSIS** (통계청)와 같은 공공 데이터를 통해 아파트 가격, 환율 데이터를 가져올 수 있습니다. 이후 데이터 프레임을 구성하고 상관관계를 계산하는 방법을 설명하겠습니다.

### 1. 데이터 수집

다양한 자산군의 데이터를 수집할 때, 아래의 패키지를 활용합니다:
- `yfinance`: 주식과 채권, 지수 등의 데이터를 가져오기 위해 사용.
- `pandas_datareader`: 환율 등의 금융 데이터를 가져오기 위해 사용.
- `requests`/`beautifulsoup4`: 웹 스크래핑으로 공공 데이터 가져오기.
- `pandas`: 데이터 처리.
- `matplotlib`, `seaborn`: 상관관계 표 시각화.

```bash
pip install yfinance pandas_datareader requests beautifulsoup4 pandas matplotlib seaborn
```

### 2. 각 자산별 데이터 수집 예제

1. **KOSPI, 회사채, 국채, 미국 S&P 500 (주식/채권 데이터)**  
   `yfinance`를 사용하여 주요 지수 데이터를 수집할 수 있습니다.

```python
import yfinance as yf
import pandas as pd

# KOSPI, S&P 500, 미국채 데이터 다운로드
assets = ['^KS11', '^GSPC', 'IEF']  # KOSPI, S&P 500, 미국채 ETF
data = yf.download(assets, start='2002-01-01', end='2016-12-31')['Adj Close']
data.columns = ['KOSPI', 'S&P500', 'US_Treasury']

print(data.head())
```

2. **달러/원 환율 데이터**  
   `pandas_datareader`를 사용하여 환율 데이터를 가져올 수 있습니다.

```python
from pandas_datareader import data as pdr

# 달러/원 환율 데이터
exchange_rate = pdr.get_data_fred('DEXKOUS', start='2002-01-01', end='2016-12-31')
exchange_rate.columns = ['USD/KRW']

print(exchange_rate.head())
```

3. **한국 아파트 가격 (KOSIS)**  
   한국 통계청(KOSIS)에서 제공하는 아파트 가격 데이터를 수집할 수 있습니다. 일반적으로 CSV 파일 형태로 제공되므로 이를 pandas로 처리할 수 있습니다.

```python
import pandas as pd

# KOSIS에서 다운로드한 CSV 파일을 불러오기 (예: 'apartment_prices.csv')
apt_data = pd.read_csv('apartment_prices.csv', index_col='Date', parse_dates=True)

# 필요한 열만 선택
apt_data = apt_data[['Nationwide_Apartment_Price']]
print(apt_data.head())
```

4. **리츠 (REITs)**  
   미국 리츠 데이터는 Yahoo Finance에서 대표적인 리츠 ETF로 `VNQ`를 사용할 수 있습니다.

```python
reit_data = yf.download('VNQ', start='2002-01-01', end='2016-12-31')['Adj Close']
reit_data.name = 'REITs'

print(reit_data.head())
```

### 3. 데이터 병합

각 자산 데이터를 하나의 데이터프레임으로 병합하여 상관관계를 계산할 수 있습니다.

```python
# 데이터 병합
merged_data = pd.concat([data, exchange_rate, apt_data, reit_data], axis=1)

# NaN 값을 제거 (필요 시)
merged_data.dropna(inplace=True)

print(merged_data.head())
```

### 4. 상관관계 계산 및 시각화

`pandas`의 `corr()` 함수를 이용해 상관관계를 계산한 후, 이를 시각화합니다.

```python
import seaborn as sns
import matplotlib.pyplot as plt

# 상관관계 계산
correlation_matrix = merged_data.corr()

# 상관관계 시각화
plt.figure(figsize=(10, 8))
sns.heatmap(correlation_matrix, annot=True, cmap='coolwarm', linewidths=0.5)
plt.title('Asset Correlation Matrix (2002-2016)')
plt.show()
```

### 5. 전체 코드 정리

```python
import yfinance as yf
import pandas as pd
from pandas_datareader import data as pdr
import seaborn as sns
import matplotlib.pyplot as plt

# 1. 데이터 수집
assets = ['^KS11', '^GSPC', 'IEF']  # KOSPI, S&P 500, 미국채 ETF
data = yf.download(assets, start='2002-01-01', end='2016-12-31')['Adj Close']
data.columns = ['KOSPI', 'S&P500', 'US_Treasury']

exchange_rate = pdr.get_data_fred('DEXKOUS', start='2002-01-01', end='2016-12-31')
exchange_rate.columns = ['USD/KRW']

apt_data = pd.read_csv('apartment_prices.csv', index_col='Date', parse_dates=True)
apt_data = apt_data[['Nationwide_Apartment_Price']]

reit_data = yf.download('VNQ', start='2002-01-01', end='2016-12-31')['Adj Close']
reit_data.name = 'REITs'

# 2. 데이터 병합
merged_data = pd.concat([data, exchange_rate, apt_data, reit_data], axis=1)
merged_data.dropna(inplace=True)

# 3. 상관관계 계산 및 시각화
correlation_matrix = merged_data.corr()

plt.figure(figsize=(10, 8))
sns.heatmap(correlation_matrix, annot=True, cmap='coolwarm', linewidths=0.5)
plt.title('Asset Correlation Matrix (2002-2016)')
plt.show()
```

### 6. 요약

이 코드에서는 Yahoo Finance, pandas_datareader, 공공 데이터(KOSIS) 등을 활용하여 KOSPI, 미국채, 달러/원 환율, 아파트 가격, S&P 500, 리츠 등 다양한 자산군의 실제 데이터를 수집하고, 이를 바탕으로 상관관계 표를 만들었습니다.